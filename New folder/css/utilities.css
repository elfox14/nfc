/* --- Helpers --- */
.visually-hidden { position: absolute; width: 1px; height: 1px; margin: -1px; padding: 0; overflow: hidden; clip: rect(0, 0, 0, 0); border: 0; }
.control-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; align-items: center; }
.export-buttons { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }

/* --- Drag Hints --- */
.dnd-hover-hint {
    position: absolute; top: -5px; right: -5px; width: 24px; height: 24px; background-color: rgba(36, 52, 71, 0.8); color: var(--accent-primary); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px; z-index: 5; pointer-events: none; transition: opacity 0.2s ease-in-out, transform 0.2s ease-in-out; opacity: 0; transform: scale(0.8); border: 1px solid var(--accent-primary);
}
#card-logo:hover .dnd-hover-hint,
#card-personal-photo-wrapper:hover .dnd-hover-hint,
#card-name:hover .dnd-hover-hint,
#card-tagline:hover .dnd-hover-hint,
#qr-code-wrapper:hover .dnd-hover-hint,
.phone-button-draggable-wrapper:hover .dnd-hover-hint,
.draggable-social-link:hover .dnd-hover-hint { opacity: 1; transform: scale(1); }

.drag-handle { color: var(--text-secondary); padding: 0 5px; cursor: grab; opacity: 0.7; }
.drop-zone-overlay { position: absolute; inset: 0; background-color: rgba(77, 166, 255, 0.2); border: 2px dashed var(--accent-primary); border-radius: 8px; display: flex; flex-direction: column; justify-content: center; align-items: center; gap: 10px; color: var(--text-primary); z-index: 10; opacity: 0; pointer-events: none; transition: opacity 0.2s ease-in-out; }
.fieldset.drag-over .drop-zone-overlay { opacity: 1; }

/* --- Animations --- */
@keyframes spin { to { transform: rotate(360deg); } }
@keyframes fade-in { from { opacity: 0; } to { opacity: 1; } }
@keyframes fa-spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
@keyframes pulsate { 0% { box-shadow: 0 0 10px 3px rgba(77, 166, 255, 0); } 50% { box-shadow: 0 0 10px 3px rgba(77, 166, 255, 0.6); } 100% { box-shadow: 0 0 10px 3px rgba(77, 166, 255, 0); } }

.spinner { border: 3px solid rgba(255, 255, 255, 0.2); border-radius: 50%; border-top-color: var(--accent-primary); width: 20px; height: 20px; animation: spin 1s linear infinite; }

/* --- UI Feedback --- */
.highlighted { outline: 2px dashed var(--accent-primary); box-shadow: 0 0 15px var(--accent-primary); transition: all 0.3s ease; border-radius: 5px; }
.form-element-highlighted { animation: pulsate 1.5s ease-in-out; border-radius: 8px; }

#save-toast { position: fixed; bottom: 20px; right: 20px; background-color: var(--accent-secondary); color: var(--text-primary); padding: 10px 20px; border-radius: 6px; box-shadow: 0 4px 12px rgba(0,0,0,0.3); z-index: 1000; opacity: 0; transform: translateY(100%); transition: opacity 0.3s ease, transform 0.3s ease; pointer-events: none; }
#save-toast.show { opacity: 1; transform: translateY(0); }

[data-tooltip]::after { content: attr(data-tooltip); position: absolute; bottom: 125%; right: 50%; transform: translateX(50%); background-color: #333; color: white; padding: 5px 10px; border-radius: 4px; font-size: 12px; white-space: nowrap; opacity: 0; pointer-events: none; transition: opacity 0.2s; z-index: 10; }
[data-tooltip]:hover::after { opacity: 1; }

#back-to-top-btn { display: flex; position: fixed; bottom: 20px; inset-inline-start: 20px; z-index: 1001; border: none; outline: none; background-color: var(--accent-primary); color: white; cursor: pointer; padding: 0; border-radius: 50%; width: 45px; height: 45px; font-size: 18px; box-shadow: 0 4px 8px rgba(0,0,0,0.3); opacity: 0; transform: translateY(100px); pointer-events: none; transition: opacity 0.3s ease, transform 0.3s ease; align-items: center; justify-content: center; }
#back-to-top-btn.visible { opacity: 1; transform: translateY(0); pointer-events: auto; }

@media (max-width: 768px) {
    #back-to-top-btn { inset-inline-start: auto; inset-inline-end: 20px; }
    .control-grid, .export-buttons { grid-template-columns: 1fr; gap: 12px; }
}

/* --- Font Specifics --- */
#name-font option[value*="Tajawal"], #tagline-font option[value*="Tajawal"], #phone-text-font option[value*="Tajawal"], #back-buttons-font option[value*="Tajawal"], #social-text-font option[value*="Tajawal"] { font-family: 'Tajawal', sans-serif; }
#name-font option[value*="Cairo"], #tagline-font option[value*="Cairo"], #phone-text-font option[value*="Cairo"], #back-buttons-font option[value*="Cairo"], #social-text-font option[value*="Cairo"] { font-family: 'Cairo', sans-serif; }
#name-font option[value*="Lalezar"], #tagline-font option[value*="Lalezar"], #phone-text-font option[value*="Lalezar"], #social-text-font option[value*="Lalezar"] { font-family: 'Lalezar', cursive; font-size: 1.2rem; }
#phone-btn-font option[value*="Poppins"], #back-buttons-font option[value*="Poppins"], #social-text-font option[value*="Poppins"] { font-family: 'Poppins', sans-serif; }

/* --- Advanced Features (Glassmorphism) --- */
.glass-card {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
}