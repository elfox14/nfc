/* --- الشريط العلوي --- */
.pro-toolbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 15px;
    height: var(--toolbar-height);
    background-color: var(--form-bg);
    border-bottom: 1px solid var(--accent-secondary);
    box-shadow: 0 2px 10px rgba(0,0,0,0.2);
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1000;
}
.toolbar-group { display: flex; align-items: center; gap: 12px; }
.toolbar-title-desktop { display: none; }
.toolbar-btn-mobile-hidden { display: none; }

/* --- الهيكل العام --- */
.pro-layout {
    display: grid;
    grid-template-columns: 1fr; 
    height: calc(100vh - var(--toolbar-height));
    position: relative;
    padding-bottom: var(--mobile-nav-height);
    flex-grow: 1; 
}

.pro-canvas {
    grid-column: 1 / -1;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: center;
    padding: 20px 10px;
    overflow-y: auto;
    position: relative;
    background-color: var(--page-bg);
}

.pro-sidebar {
    background-color: var(--form-bg);
    overflow-y: auto;
    padding: 20px;
    display: none; /* مخفي في الموبايل */
}
.pro-sidebar.active { display: block; }
.pro-sidebar::-webkit-scrollbar { width: 8px; }
.pro-sidebar::-webkit-scrollbar-track { background: var(--accent-secondary); }
.pro-sidebar::-webkit-scrollbar-thumb { background: var(--accent-primary); border-radius: 4px; }

/* --- شريط الموبايل السفلي --- */
.pro-mobile-nav {
    display: flex;
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    height: var(--mobile-nav-height);
    background-color: var(--form-bg);
    border-top: 1px solid var(--accent-secondary);
    z-index: 1000;
    box-shadow: 0 -2px 10px rgba(0,0,0,0.2);
}
.pro-mobile-nav .mobile-tab-btn {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 4px;
    padding: 8px 5px;
    font-size: 0.8rem;
    font-weight: 600;
    color: var(--text-secondary);
    background: none;
    border: none;
    border-top: 3px solid transparent;
    border-radius: 0;
    margin: 0;
    cursor: pointer;
    transition: color 0.2s, border-color 0.2s;
}
.pro-mobile-nav .mobile-tab-btn i { font-size: 1.2rem; }
.pro-mobile-nav .mobile-tab-btn.active { color: var(--accent-primary); border-top-color: var(--accent-primary); }

/* --- تنسيقات التبويبات (Tabs Logic) --- */
.tab-pane { display: none; }
.tab-pane.active { display: block; animation: fade-in 0.4s ease; }

/* ========================================= */
/* === MEDIA QUERIES: DESKTOP (>1200px) === */
/* ========================================= */
@media (min-width: 1201px) {
    body { padding-bottom: 0; }
    .toolbar-title-desktop { display: inline; font-weight: bold; color: var(--text-primary); }
    .toolbar-btn-mobile-hidden { display: inline-flex; }
    
    .pro-layout {
        grid-template-columns: 320px 1fr 350px;
        height: calc(100vh - var(--toolbar-height));
        padding-bottom: 0;
    }
    .pro-sidebar { display: block !important; height: 100%; }
    .pro-sidebar-left { grid-column: 3 / 4; grid-row: 1; border-left: 1px solid var(--accent-secondary); }
    .pro-canvas { grid-column: 2 / 3; grid-row: 1; padding: 40px; }
    .pro-sidebar-right { grid-column: 1 / 2; grid-row: 1; border-right: 1px solid var(--accent-secondary); }
    .pro-mobile-nav { display: none; }
    .pro-toolbar .btn-success { padding: 10px 20px; font-size: 1rem; }
}

/* ========================================= */
/* === MEDIA QUERIES: MOBILE (<=1200px) === */
/* ========================================= */
@media (max-width: 1200px) {
    body { overflow: hidden; height: 100vh; position: fixed; width: 100%; }
    .pro-layout { display: flex; flex-direction: column; height: 100%; padding-bottom: 0; }
    
    /* منطقة المعاينة (الجزء العلوي الثابت) */
    .pro-canvas {
        flex: 0 0 38%; 
        background: #15202b;
        overflow: hidden;
        padding: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 5;
        box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        border-bottom: 1px solid var(--accent-secondary);
    }
    .pro-mobile-nav { position: relative; flex: 0 0 55px; order: 2; border-top: none; border-bottom: 1px solid var(--accent-secondary); box-shadow: none; }
    
    /* منطقة الأدوات (الجزء السفلي القابل للتمرير) */
    .pro-sidebar {
        display: none; order: 3; flex: 1; overflow-y: auto; padding: 20px; padding-bottom: 100px; background-color: var(--page-bg); overscroll-behavior: contain;
    }
    .pro-sidebar.active { display: block; }
}

@media (max-width: 380px) {
    .pro-canvas { flex: 0 0 35%; }
}
@media (max-width: 768px) {
    .pro-sidebar { padding: 10px; }
}