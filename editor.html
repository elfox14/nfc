<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>محرر بطاقات العمل الذكية | MC PRIME</title>
    <meta name="description"
        content="استخدم محرر MC PRIME لتصميم وتخصيص بطاقة عملك الذكية (NFC) مجاناً. تحكم كامل في الألوان، الخطوط، الشعار، ومعلومات الاتصال.">

    <meta name="robots" content="noindex, nofollow">
    <link rel="icon" id="favicon" href="mcprime-logo-transparent.png" type="image/png">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Cairo:wght@700&family=Lalezar&family=Poppins:wght@400;700&family=Tajawal:wght@400;700&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/shepherd.js@10.0.1/dist/css/shepherd.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.2/cropper.min.css">
    <link rel="stylesheet" href="style.css?v=1.1">
    <link rel="stylesheet" href="toast.css">
    <script src="security-utils.js"></script>
    <script src="script-core.js" defer></script>
    <script src="script-card.js" defer></script>
    <script src="script-ui.js" defer></script>
    <script src="script-main.js" defer></script>
    <script src="chatbot-guide.js" defer></script>

</head>

<body>

    <header class="pro-toolbar">
        <div class="toolbar-group toolbar-start">
            <a href="index.html"
                style="color: var(--text-primary); text-decoration: none; font-weight: bold; display: flex; align-items: center; gap: 8px;"
                title="العودة إلى الرئيسية">
                <img src="mcprime-logo-transparent.png" alt="MC PRIME Logo" style="height: 30px; width: 30px;">
                <span class="toolbar-title-desktop">محرر MC PRIME</span>
            </a>
            <div class="undo-redo-container">
                <button id="redo-btn" class="btn-icon" title="إعادة" aria-label="إعادة" disabled><i
                        class="fas fa-redo"></i></button>
                <button id="undo-btn" class="btn-icon" title="تراجع" aria-label="تراجع" disabled><i
                        class="fas fa-undo"></i></button>
            </div>
        </div>

        <div class="toolbar-group toolbar-end">
            <button id="save-to-gallery-btn" class="btn btn-secondary toolbar-btn-mobile-hidden"><span>حفظ
                    بالمعرض</span><i class="fas fa-save" aria-hidden="true"></i></button>
            <div class="download-container">
                <button id="download-options-btn" class="btn btn-secondary">
                    <span>تنزيل</span><i class="fas fa-chevron-down" aria-hidden="true"></i>
                </button>
                <ul id="download-menu" class="dropdown-menu">
                    <li><button id="download-png-front" aria-controls="export-modal-overlay" aria-expanded="false"><i
                                class="fas fa-image" aria-hidden="true"></i> صورة الواجهة (PNG)</button></li>
                    <li><button id="download-png-back" aria-controls="export-modal-overlay" aria-expanded="false"><i
                                class="fas fa-image" aria-hidden="true"></i> صورة الخلفية (PNG)</button></li>
                    </button>
                    </nav>

                    <div class="visually-hidden" aria-live="polite" id="live-announcer"></div>
                    <div id="save-toast" class="toast"></div>
                    <div id="export-loading-overlay" class="modal-overlay">
                        <div class="modal-content" style="text-align: center;">
                            <div class="spinner" style="margin: 0 auto 15px auto;"></div>
                            <p>جاري تجهيز الصورة عالية الجودة، قد يستغرق الأمر بضع لحظات...</p>
                        </div>
                    </div>

                    <div id="export-modal-overlay" class="modal-overlay">
                        <div class="modal-content">
                            <h3>خيارات التصدير</h3>
                            <button id="export-modal-close" class="modal-close" aria-label="إغلاق">&times;</button>
                            <div class="form-group">
                                <label for="export-format">نوع الملف</label>
                                <select id="export-format">
                                    <option value="png">PNG (جودة عالية)</option>
                                    <option value="jpeg">JPEG (حجم أصغر)</option>
                                </select>
                            </div>
                            <div class="form-group" id="export-quality-group" style="display: none;">
                                <label for="export-quality">الجودة (1-100)</label>
                                <div class="quality-slider-wrapper">
                                    <input type="range" id="export-quality" min="10" max="100" value="92">
                                    <span id="export-quality-value">92</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>حجم الصورة (الدقة) <i class="fas fa-question-circle"
                                        data-tooltip="اختر 2x أو 3x للحصول على جودة مناسبة للطباعة."
                                        aria-hidden="true"></i></label>
                                <div class="scale-buttons">
                                    <button class="scale-btn" data-scale="1">1x (ويب)</button>
                                    <button class="scale-btn selected" data-scale="2">2x (طباعة)</button>
                                    <button class="scale-btn" data-scale="3">3x (فائقة)</button>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button id="confirm-export-btn" class="modal-confirm">تأكيد الحفظ</button>
                            </div>
                        </div>
                    </div>

                    <div id="gallery-modal-overlay" class="modal-overlay">
                        <div class="modal-content gallery-modal">
                            <h3>معرض التصاميم المحفوظة</h3>
                            <button id="gallery-modal-close" class="modal-close" aria-label="إغلاق">&times;</button>
                            <div id="gallery-grid" class="gallery-grid">
                            </div>
                            <div class="modal-footer">
                                <button id="gallery-select-all">تحديد الكل</button>
                                <button id="gallery-deselect-all">إلغاء تحديد الكل</button>
                                <button id="gallery-download-zip" class="modal-confirm" disabled><i
                                        class="fas fa-file-archive" aria-hidden="true"></i> تحميل المحددات
                                    (ZIP)</button>
                            </div>
                        </div>
                    </div>

                    <div id="share-fallback-modal-overlay" class="modal-overlay">
                        <div class="modal-content">
                            <h3>مشاركة الرابط</h3>
                            <button id="share-fallback-modal-close" class="modal-close"
                                aria-label="إغلاق">&times;</button>
                            <p>متصفحك لا يدعم المشاركة المباشرة. استخدم أحد الخيارات التالية:</p>
                            <div class="share-fallback-buttons">
                                <a id="share-email" target="_blank"><i class="fas fa-envelope" aria-hidden="true"></i>
                                    بريد إلكتروني</a>
                                <a id="share-whatsapp" target="_blank"><i class="fab fa-whatsapp"
                                        aria-hidden="true"></i> واتساب</a>
                                <a id="share-twitter" target="_blank"><i class="fab fa-twitter" aria-hidden="true"></i>
                                    تويتر</a>
                                <button id="share-copy-link"><i class="fas fa-copy" aria-hidden="true"></i> نسخ
                                    الرابط</button>
                            </div>
                        </div>
                    </div>

                    <audio id="audio-success"
                        src="data:audio/mpeg;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhBQAAAAgAAgA="></audio>
                    <audio id="audio-error"
                        src="data:audio/mpeg;base64,UklGRkYAAABXQVZFZm10IBIAAAABAAEAQB8AAEAfAAABAAgAZGF0YSIBAAD2/v3//vj79/77/P/8/f7/+Pn49/b19fXz9PLu8erw6+7k6uTm5+Th49/f3tna2tXW1dvT1tHX0dnP0c/NzczGxcTDwsHCwsHCwsHCAgA="></audio>

                    <div id="qrcode-container" class="visually-hidden"></div>
                    <div id="qr-code-temp-generator"></div>

                    <button id="back-to-top-btn" title="الرجوع للأعلى" aria-label="الرجوع إلى أعلى الصفحة"><i
                            class="fas fa-arrow-up" aria-hidden="true"></i></button>

                    <div id="help-modal-overlay" class="modal-overlay">
                        <div class="modal-content" style="max-width: 700px;">
                            <h3 style="text-align: center; margin-top: 0;">مركز المساعدة</h3>
                            <button id="help-modal-close" class="modal-close" aria-label="إغلاق">&times;</button>

                            <nav class="help-tabs-nav">
                                <button class="help-tab-btn active" data-tab-target="tab-video-tutorial">
                                    <i class="fas fa-play-circle"></i> شرح بالفيديو
                                </button>
                                <button class="help-tab-btn" data-tab-target="tab-faq">
                                    <i class="fas fa-question-circle"></i> أسئلة شائعة
                                </button>
                            </nav>

                            <div class="help-tabs-content">
                                <div id="tab-video-tutorial" class="help-tab-pane active">
                                    <h4>شرح سريع لوظائف المحرر</h4>
                                    <p>شاهد هذا الفيديو القصير (دقيقة واحدة) لمعرفة كيفية استخدام أهم الميزات.</p>
                                    <div class="video-container">
                                        <iframe src="" title="YouTube video player" frameborder="0"
                                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                            allowfullscreen></iframe>
                                    </div>
                                    <hr>
                                    <h4>شروحات متحركة (GIFs)</h4>
                                    <div class="gif-grid">
                                        <div>
                                            <p><strong>1. تغيير مكان العناصر</strong></p>
                                            <img src="https://media.giphy.com/media/3o7TKSjRrfIPjeI6e4/giphy.gif"
                                                alt="شرح متحرك لكيفية سحب وإفلات العناصر">
                                        </div>
                                        <div>
                                            <p><strong>2. رفع شعار خاص بك</strong></p>
                                            <img src="https://media.giphy.com/media/l41lUj1oeHo1h2b1S/giphy.gif"
                                                alt="شرح متحرك لكيفية رفع شعار">
                                        </div>
                                    </div>
                                </div>

                                <div id="tab-faq" class="help-tab-pane">
                                    <details class="fieldset-accordion" open>
                                        <summary>كيف أغير مكان الشعار أو الاسم؟</summary>
                                        <div class="fieldset-content">
                                            <p>ببساطة، اضغط على العنصر الذي تريد تحريكه (مثل الشعار أو مربع النص) واستمر
                                                بالضغط مع سحبه إلى المكان الجديد على البطاقة.</p>
                                        </div>
                                    </details>
                                    <details class="fieldset-accordion">
                                        <summary>لا يظهر رمز الـ QR، ماذا أفعل؟</summary>
                                        <div class="fieldset-content">
                                            <p>تأكد من اختيار مصدر للرمز من قسم "رمز الاستجابة السريعة (QR)". الخيار
                                                الموصى به هو "رابط البطاقة"، وبعد اختياره اضغط على زر "إنشاء/تحديث QR
                                                Code".</p>
                                        </div>
                                    </details>
                                    <details class="fieldset-accordion">
                                        <summary>كيف أحفظ التصميم كصورة؟</summary>
                                        <div class="fieldset-content">
                                            <p>من شريط الأدوات العلوي، اضغط على زر "تنزيل" واختر "صورة الواجهة" أو "صورة
                                                الخلفية".</p>
                                        </div>
                                    </details>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="crop-modal-overlay" class="modal-overlay">
                        <div class="modal-content crop-modal-content">
                            <h3>قص الصورة الشخصية</h3>
                            <p
                                style="font-size: 0.9rem; color: var(--text-secondary); margin-top: 0; margin-bottom: 15px;">
                                حرّك الصورة لتحديد الجزء المطلوب ثم اضغط "تأكيد".
                            </p>
                            <div id="crop-image-container">
                                <img id="crop-image" src="" alt="معاينة الصورة للقص">
                            </div>

                            <div class="form-group" style="margin-top: 15px;">
                                <label>معاينة الشكل النهائي</label>
                                <div class="radio-group cropper-preview-toggle">
                                    <label><input type="radio" name="crop-shape-preview" value="square" checked>
                                        مربع</label>
                                    <label><input type="radio" name="crop-shape-preview" value="circle"> دائري</label>
                                </div>
                            </div>

                            <div class="modal-footer">
                                <button id="cancel-crop-btn" class="btn btn-secondary"
                                    style="width: auto;">إلغاء</button>
                                <button id="confirm-crop-btn" class="modal-confirm"
                                    style="width: auto; flex-grow: 1;">تأكيد القص</button>
                            </div>
                        </div>
                    </div>
                    <script src="https://cdn.jsdelivr.net/npm/shepherd.js@10.0.1/dist/js/shepherd.min.js"></script>
                    <script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>

                    <script src="script-core.js" defer></script>

                    <script src="script-card.js" defer></script>

                    <i class="fas fa-save"></i>
                    </button>
                    <button class="mobile-fab-action" data-action="share" title="مشاركة">
                        <i class="fas fa-share-alt"></i>
                    </button>
                    <button class="mobile-fab-action" data-action="download" title="تنزيل">
                        <i class="fas fa-download"></i>
                    </button>
            </div>
        </div>
</body>

</html>